# Демотиватор Бот для Telegram

Модульный Telegram бот для создания демотиваторов с поддержкой:
- Цветных эмоджи (Twemoji)
- Видео и анимированных стикеров
- Эффектов (инверсия, винтаж)
- AI-генерации текста (Groq)
- Рандомных стикеров из паков

## Структура проекта

Проект разбит на логические модули для удобства поддержки и расширения:

```
dmtvtr-bot/
├── bot.py                  # Точка входа
├── app/                    # Контекст приложения + middleware
├── config/                 # Конфигурация
│   └── config.py           # Настройки бота и константы
├── demotivator/            # Логика создания демотиваторов
│   ├── image_creator.py    # Создание изображений
│   ├── video_creator.py    # Создание видео
│   └── layout.py           # Расчет разметки
├── handlers/               # Обработчики команд Telegram
│   ├── demotivator.py      # /d /inv /vin + демотиваторы из реплая/капа
│   ├── emoji.py            # /emoji + колбеки
│   ├── help.py             # /help
│   ├── rating.py           # /profile /top /plus
│   ├── tenet.py            # /tenet
│   └── trump.py            # /trump
├── ratings/                # Рейтинг + лычки (SQLite)
├── services/               # Интеграции (Groq)
├── utils/                  # Утилиты
│   ├── fonts.py            # Работа со шрифтами
│   ├── text.py             # Обработка текста
│   ├── image_effects.py    # Эффекты (инверсия, винтаж)
│   ├── media_converter.py  # Конвертация видео/стикеров
└── requirements.txt        # Зависимости
```

## Возможности

### Команды
- `/d [текст]` — создать демотиватор
- `/dd [текст]` — аналог
- `/д [текст]` — русский вариант
- `/дд [текст]` — русский вариант
- `/inv [текст]` — инверсия цветов
- `/vin [текст]` — винтажная обработка
- `/profile` — профиль (рейтинг + лычка)
- `/top` — топ рейтинга
- `/plus` — +1 рейтинга (ответом на сообщение)
- `/help` — справка

### Способы использования

1. **Ответ командой на сообщение**
   - Отправь фото/видео/стикер/текст
   - Ответь на него: `/д крутой текст`

2. **Фото с подписью**
   - Отправь фото с подписью: `/д текст`

3. **Команда без реплая**
   - Просто отправь `/д` (рандомный стикер + текст)

## Установка

### 1. Требования

**Система:** Ubuntu 20.04+ (или Debian)

**Системные зависимости:**
```bash
sudo apt update
sudo apt install -y python3-venv python3-pip ffmpeg \
    libcairo2-dev pkg-config python3-dev fonts-dejavu \
    fonts-noto fonts-noto-color-emoji
```

### 2. Установка

```bash
# Клонируй репозиторий
git clone <url_to_repo>
cd dmtvtr-bot

# Создай виртуальное окружение
python3 -m venv venv
source venv/bin/activate

# Установи зависимости
pip install -r requirements.txt
```

### 3. Настройка

1. Создай файл с переменными окружения:
   ```bash
   cp .env.example .env
   ```
2. Открой `.env` и вставь токен бота (от @BotFather).

### 4. Запуск

```bash
python bot.py
```

## Настройка функций

Все настройки находятся в `config/config.py`:
- Токены и ключи
- Пути к шрифтам
- Списки стикерпаков
- Параметры разметки (отступы, размеры)
- Настройки видео (FPS, битрейт)

## Лицензия

MIT License
